// Init jquery picture, float labels, fit text
$(function(){
    $('picture').picture();
    $('input.floatlabel').floatlabel({
        slideInput: true,
        labelStartTop: '-2.5em',
        labelEndTop: '-2.5em',
        transitionDuration: '0.3s'
    });
    $('.slab').slabText();
});

$(function() {

  // Variables
  if(!(/iPhone|iPod/i).test(navigator.userAgent || navigator.vendor || window.opera)){
    var windowHeight = $(window).height();
  }
  else {
      var windowHeight = $(window).height() + 70;
  }

  var windowWidth = $(window).width();
  var headerHeight = $('#main-nav').outerHeight();
  var appNavHeight = $('#app-nav').outerHeight();

  var rem = function rem() {
    var html = document.getElementsByTagName('html')[0];

    return function () {
        return parseInt(window.getComputedStyle(html)['fontSize']);
    }
  }();

  var current_rem = rem();

  $(window).resize(function() { 
    if(!(/iPhone|iPod/i).test(navigator.userAgent || navigator.vendor || window.opera)){
        windowHeight = $(window).height();
    }
    else {
        windowHeight = $(window).height() + 70;
    }

    windowWidth = $(window).width();
    headerHeight = $('#main-nav').outerHeight();
    appNavHeight = $('#app-nav').outerHeight();

    current_rem = rem();
  });

  console.log(current_rem);

  // Index splash sizing
  $('#index-splash').height(windowHeight - headerHeight - appNavHeight);
  console.log(windowHeight);
  console.log(headerHeight);
  console.log(appNavHeight);

  // App nav sticky
  $(window).scroll(function () { 

    console.log($(window).scrollTop());

    if ($(window).scrollTop() > (11.2 * current_rem)) {
      $('#app-nav').addClass('navbar-fixed-top');
      $('#app-nav-push').addClass('show');
    }

    if ($(window).scrollTop() < (11.2 * current_rem)) {
      $('#app-nav').removeClass('navbar-fixed-top');
      $('#app-nav-push').removeClass('show');
    }
  });
});