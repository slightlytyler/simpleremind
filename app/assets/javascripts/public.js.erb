// Init jquery picture, float labels, fit text
function pageLoad(){
  // Variables
  if(!(/iPhone|iPod/i).test(navigator.userAgent || navigator.vendor || window.opera)){
    var windowHeight = $(window).height();
  }
  else {
      var windowHeight = $(window).height() + 70;
  }

  var windowWidth = $(window).width();
  var headerHeight = $('#main-nav').outerHeight();
  var appNavHeight = $('#app-nav').outerHeight();

  $(window).resize(function() { 
    if(!(/iPhone|iPod/i).test(navigator.userAgent || navigator.vendor || window.opera)){
        windowHeight = $(window).height();
    }
    else {
        windowHeight = $(window).height() + 70;
    }

    windowWidth = $(window).width();
    headerHeight = $('#main-nav').outerHeight();
    appNavHeight = $('#app-nav').outerHeight();
  });
  //////

  // Init float labels
  $('.floatlabel').floatlabel({
      slideInput: true,
      labelStartTop: '.2em',
      labelEndTop: '.2em',
      transitionDuration: '0.3s'
  });

  // Init slab text
  $('.slab').slabText();

  // Init tab bar
  $('#app-nav').tabBar(headerHeight);
  
  // Init reminder side bar
  $('#reminder-sidebar-toggle').sidr({
    side: 'right',
    body: '#send-page .outer-container'
  });

  // Index splash sizing
  $('.splash.full-page').css('min-height', windowHeight - headerHeight - appNavHeight); 
  $('.splash.full-page-app').css('min-height', windowHeight - appNavHeight); 

  $(window).resize(function() {
    $('.splash.full-page').css('min-height', windowHeight - headerHeight - appNavHeight); 
    $('.splash.full-page-app').css('min-height', windowHeight - appNavHeight); 
  });

  // Size specific functions
  //
  // Mobile size only
  if( ($('#app-nav').offset().top + $('#app-nav').height() > ($(window).scrollTop() + $(window).height() - 20))) {
    smoothHashNav(0);
  }
  // Not mobile size
  else {
    // Init smooth hash scrolling
    smoothHashNav(appNavHeight);
  }
};

$(function(){
  // On document ready
  pageLoad();

  // On modal open
  $('body').on($.modal.OPEN, function(event, modal) {
    pageLoad();
  });
});